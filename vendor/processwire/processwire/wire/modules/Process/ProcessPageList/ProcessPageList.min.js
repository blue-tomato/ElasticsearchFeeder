function ProcessPageListInit(){if(ProcessWire.config.ProcessPageList){$("#"+ProcessWire.config.ProcessPageList.containerID).ProcessPageList(ProcessWire.config.ProcessPageList)}}$(document).ready(function(){ProcessPageListInit()});(function(a){a.fn.ProcessPageList=function(c){var d={mode:"",limit:35,rootPageID:0,showRootPage:true,selectedPageID:0,adminPageID:2,trashPageID:7,langID:0,selectAllowUnselect:false,selectShowPageHeader:true,selectShowPath:true,selectStartLabel:"Change",selectCancelLabel:"Cancel",selectSelectLabel:"Select",selectUnselectLabel:"Unselect",moreLabel:"More",trashLabel:"Trash",moveInstructionLabel:"Click and drag to move",selectSelectHref:"#",selectUnselectHref:"#",ajaxURL:ProcessWire.config.urls.admin+"page/list/",ajaxMoveURL:ProcessWire.config.urls.admin+"page/sort/",paginationClass:"PageListPagination",paginationCurrentClass:"PageListPaginationCurrent",paginationLinkClass:"ui-state-default",paginationLinkCurrentClass:"ui-state-active",paginationHoverClass:"ui-state-hover",paginationDisabledClass:"ui-priority-secondary",openPagination:0,openPageIDs:[],openPageData:{},speed:200,useHoverActions:false,hoverActionDelay:250,hoverActionFade:150,useNarrowActions:a("body").hasClass("pw-narrow-width"),spinnerMarkup:"<span class='PageListLoading'><i class='ui-priority-secondary fa fa-fw fa-spin fa-spinner'></i></span>",labelName:"",qtyType:""};var b=[];var f=false;var e=a("body").hasClass("modal")||a("body").hasClass("pw-iframe");if(typeof ProcessWire.config.ProcessPageList!="undefined"){a.extend(d,ProcessWire.config.ProcessPageList)}a.extend(d,c);return this.each(function(o){var A=a(this);var w;var K;var z=a(d.spinnerMarkup);var N=0;var i=0;function D(){K=a("<div class='PageListRoot'></div>");if(A.is(":input")){d.selectedPageID=A.val();if(!d.selectedPageID.length){d.selectedPageID=0}d.mode="select";A.before(K);w=A.closest(".InputfieldContent");I()}else{d.mode="actions";A.append(K);w=A;p(d.rootPageID>0?d.rootPageID:1,K,0,true)}a(document).on("pageListRefresh",function(P,O){M(O)});if(d.useHoverActions){K.addClass("PageListUseHoverActions");q()}}function q(){var Q=null;var R=null;var P=null;function O(T){var U=T.find(".PageListActions");if(!U.is(":visible")||T.hasClass("PageListItemOpen")){T.addClass("PageListItemHover");U.css("display","inline").css("opacity",0).animate({opacity:1},d.hoverActionFade)}}function S(T){var U=T.find(".PageListActions");T.removeClass("PageListItemHover");if(U.is(":visible")){U.animate({opacity:0},d.hoverActionFade,function(){U.hide()})}}w.on("keydown",".PageListItem",function(U){U=U||window.event;if(U.keyCode==0||U.keyCode==32){var T=a(this).find(".PageListActions");if(T.is(":visible")){T.css("display","none")}else{T.css("display","inline-block")}return false}});w.on("mouseover",".PageListItem",function(V){if(K.is(".PageListSorting")||K.is(".PageListSortSaving")){return}if(!a(this).children("a:first").is(":hover")){return}P=a(this);if(P.hasClass("PageListItemHover")){return}var T=a(this);if(Q){clearTimeout(Q)}var U=d.hoverActionDelay;Q=setTimeout(function(){if(P.attr("class")==T.attr("class")){if(!P.children("a:first").is(":hover")){return}var W=w.find(".PageListItemHover");O(P);W.each(function(){S(a(this))})}},U)}).on("mouseout",".PageListItem",function(V){if(K.is(".PageListSorting")||K.is(".PageListSortSaving")){return}var T=a(this);if(T.hasClass("PageListItemOpen")){return}if(!T.hasClass("PageListItemHover")){return}var U=d.hoverActionDelay*0.7;R=setTimeout(function(){if(T.is(":hover")){return}if(T.attr("class")==P.attr("class")){return}S(T)},U)})}function I(){var O=a("<ul></ul>").addClass("PageListActions PageListSelectActions actions");var Q=a("<p></p>").addClass("PageListSelectName");if(d.selectShowPageHeader){Q.append(z)}var R=a("<a></a>").addClass("PageListSelectActionToggle").addClass("PageListSelectActionToggleStart").attr("href","#").text(d.selectStartLabel).click(function(){if(a(this).text()==d.selectStartLabel){p(d.rootPageID>0?d.rootPageID:1,K,0,true);a(this).text(d.selectCancelLabel).removeClass("PageListSelectActionToggleStart").addClass("PageListSelectActionToggleCancel")}else{a(this).addClass("PageListSelectActionToggleStart").removeClass("PageListSelectActionToggleCancel");K.children(".PageList").slideUp(d.speed,function(){a(this).remove()});a(this).text(d.selectStartLabel)}return false});O.append(a("<li></li>").append(R));K.append(a("<div></div>").addClass("PageListSelectHeader").append(Q).append(O));if(d.selectShowPageHeader){var P=d.ajaxURL+"?id="+d.selectedPageID+"&render=JSON&start=0&limit=0&lang="+d.langID+"&mode="+d.mode;if(d.labelName.length){P+="&labelName="+d.labelName}a.getJSON(P,function(U){var S="";if(d.selectShowPath){S=U.page.path;if(S.substring(-1)=="/"){S=S.substring(0,S.length-1)}S=S.substring(0,S.lastIndexOf("/")+1);S='<span class="detail">'+S+"</span> "}var T=d.selectedPageID>0?S+U.page.label:"";K.children(".PageListSelectHeader").find(".PageListSelectName").html(T)})}}function C(){f=false}function F(O,P,V,Z){var X=9;var Q=Math.ceil(Z/V);i=P>=V?Math.floor(P/V):0;if(i==0){N=0}else{if((i-X+1)>N){N=i-Math.floor(X/2)}else{if(N>0&&i==N){N=i-Math.ceil(X/2)}}}if(N>Q-X){N=Q-X}if(N<0){N=0}var W=a("<ul></ul>").addClass(d.paginationClass).data("paginationInfo",{start:P,limit:V,total:Z});var Y=function(ai){var ac=a(this).parents("ul."+d.paginationClass);var ah=ac.data("paginationInfo");if(!ah){return false}var aj=parseInt(a(this).attr("href"))*ah.limit;if(aj===NaN){aj=0}var ad=F(O,aj,ah.limit,ah.total);var af=a(d.spinnerMarkup);var ag=a("<li>&nbsp;</li>").addClass(d.paginationDisabledClass).append(af.hide());ac.siblings(".PageList").remove();ac.replaceWith(ad);ad.append(ag);af.fadeIn("fast");var ae=ad.siblings().css("opacity",0.5);p(O,ad.parent(),a(this).attr("href")*ah.limit,false,false,true,function(){af.fadeOut("fast",function(){ag.remove()});ad.parent(".PageList").prev(".PageListItem").data("start",aj);g()});return false};var U=null;var R=null;for(var ab=N,S=0;ab<Q;ab++,S++){var T=a("<a></a>").html(ab+1).attr("href",ab).addClass(d.paginationLinkClass);var aa=a("<li></li>").addClass(d.paginationClass+S).append(T);if(ab==i){aa.addClass(d.paginationCurrentClass).find("a").removeClass(d.paginationLinkClass).addClass(d.paginationLinkCurrentClass)}W.append(aa);if(!R){R=aa.clone().removeClass(d.paginationCurrentClass+" "+d.paginationLinkCurrentClass);R.find("a").removeClass(d.paginationLinkCurrentClass).addClass(d.paginationLinkClass)}if(!U){U=R.clone().removeClass(d.paginationLinkClass).addClass(d.paginationDisabledClass).html("&hellip;")}if(S>=X&&ab<Q){$lastItem=R.clone();$lastItem.find("a").text(Q).attr("href",Q-1);W.append(U.clone()).append($lastItem);break}}if(N>0){$firstItem=R.clone();$firstItem.find("a").text("1").attr("href","0").click(Y);W.prepend(U.clone()).prepend($firstItem)}if(i+1<Q){$nextBtn=R.clone();$nextBtn.find("a").html("<i class='fa fa-angle-right'></i>").attr("href",i+1);W.append($nextBtn)}if(i>0){$prevBtn=R.clone();$prevBtn.find("a").attr("href",i-1).html("<i class='fa fa-angle-left'></i>");W.prepend($prevBtn)}W.find("a").click(Y).hover(function(){a(this).addClass(d.paginationHoverClass)},function(){a(this).removeClass(d.paginationHoverClass)});return W}function p(P,S,Q,U,X,R,W){if(X==undefined){X=true}if(R==undefined){R=false}var T=function(ac){if(ac&&ac.error){ProcessWire.alert(ac.message);z.hide();f=false;return}var Y=m(a(ac.children));var ab=ac.start+ac.limit;if(S.hasClass("PageListItem")){E(S,ac.page.numChildren,ac.page.numTotal)}if(ac.page.numChildren>ab){var aa=a("<a></a>").attr("href",ab).data("pageId",P).text(d.moreLabel).click(H);Y.append(a("<ul></ul>").addClass("PageListActions actions").append(a("<li></li>").addClass("PageListActionMore").append(aa)))}if(X&&(ac.page.numChildren>ab||ac.start>0)){Y.prepend(F(P,ac.start,ac.limit,ac.page.numChildren))}Y.hide();if(U){var ad;ad=m(a(ac.page));if(d.showRootPage){ad.children(".PageListItem").addClass("PageListItemOpen")}else{ad.children(".PageListItem").hide().parent(".PageList").addClass("PageListRootHidden")}ad.append(Y);S.append(ad)}else{if(S.is(".PageList")){var Z=Y.children(".PageListItem, .PageListActions");if(R){S.children(".PageListItem, .PageListActions").replaceWith(Z)}else{S.append(Z)}}else{S.after(Y)}}if(z.parent().is(".PageListRoot")){z.hide()}else{z.fadeOut("fast")}if(R){Y.show();C();if(W!=undefined){W()}}else{Y.slideDown(d.speed,function(){C();if(W!=undefined){W()}})}Y.prev(".PageListItem").data("start",ac.start)};if(!R){S.append(z.fadeIn("fast"))}var V=P+"-"+Q;if(typeof d.openPageData[V]!="undefined"&&!S.hasClass("PageListID7")&&!S.hasClass("PageListForceReload")){T(d.openPageData[V]);return}var O=d.ajaxURL+"?id="+P+"&render=JSON&start="+Q+"&lang="+d.langID+"&open="+d.openPageIDs[0]+"&mode="+d.mode;if(d.labelName.length){O+="&labelName="+d.labelName}a.getJSON(O).done(function(Z,aa,Y){T(Z)}).fail(function(Y,aa,Z){T({error:1,message:!Y.status?d.ajaxNetworkError:d.ajaxUnknownError})})}function m(O){var Q=a("<div></div>").addClass("PageList");var P=Q;O.each(function(S,R){P.append(l(R))});x(P);return Q}function v(O,U){if(O.hasClass("PageList")){O=O.prev(".PageListItem")}O.addClass("PageListForceReload");var T=O.data("pageId");var S=T+"-";if(typeof d.openPageData!="undefined"){var Q={};for(var P in d.openPageData){if(P.indexOf(S)===0){}else{Q[P]=d.openPageData[P]}}d.openPageData=Q}if(typeof U!="undefined"&&U){var R=O.children("a.PageListPage");if(O.hasClass("PageListItemOpen")){R.click();setTimeout(function(){R.click()},250)}else{R.click()}}}function x(O){a("a.PageListPage",O).click(y);O.on("click",".PageListActionMove a",j);a(".PageListActionSelect a",O).click(G);a(".PageListTriggerOpen:not(.PageListID1) > a.PageListPage",O).click();a(".PageListActionExtras > a:not(.clickExtras)",O).addClass("clickExtras").on("click",s)}function l(O){var T=a("<div></div>").data("pageId",O.id).addClass("PageListItem").addClass("PageListTemplate_"+O.template);var Q=a("<a></a>").attr("href","#").attr("title",O.path).html(O.label).addClass("PageListPage label");T.addClass(O.numChildren>0?"PageListHasChildren":"PageListNoChildren").addClass("PageListID"+O.id);if(O.status==0){T.addClass("PageListStatusOff disabled")}if(O.status&2048){T.addClass("PageListStatusUnpublished secondary")}if(O.status&1024){T.addClass("PageListStatusHidden secondary")}if(O.status&512){T.addClass("PageListStatusTemp secondary")}if(O.status&16){T.addClass("PageListStatusSystem")}if(O.status&8){T.addClass("PageListStatusSystem")}if(O.status&4){T.addClass("PageListStatusLocked")}if(O.addClass&&O.addClass.length){T.addClass(O.addClass)}if(O.type&&O.type.length>0){if(O.type=="System"){T.addClass("PageListStatusSystem")}}a(d.openPageIDs).each(function(Z,Y){Y=parseInt(Y);if(O.id==Y){T.addClass("PageListTriggerOpen")}});T.append(Q);E(T,O.numChildren,O.numTotal,true);if(O.note&&O.note.length){T.append(a("<span>"+O.note+"</span>").addClass("PageListNote detail"))}var V=a("<ul></ul>").addClass("PageListActions actions");var X=d.rootPageID==O.id?[]:[{name:d.selectSelectLabel,url:d.selectSelectHref}];if(d.mode=="actions"){X=O.actions}else{if(d.selectAllowUnselect){if(O.id==A.val()){X=[{name:d.selectUnselectLabel,url:d.selectUnselectHref}]}}}var S=null;var W=null;var R={};var U=false;if(d.useNarrowActions){for(var P=0;P<X.length;P++){if(typeof X[P].extras!="undefined"){U=true}}}a(X).each(function(ad,ab){var Y;if(ab.name==d.selectSelectLabel){Y="Select"}else{if(ab.name==d.selectUnselectLabel){Y="Select"}else{Y=ab.cn;if(d.useNarrowActions&&U&&(Y!="Edit"&&Y!="View"&&Y!="Extras")){R[Y]=ab;return}}}var aa=a("<a></a>").html(ab.name).attr("href",ab.url);if(!e){if(ab.cn=="Edit"){aa.addClass("pw-modal pw-modal-large pw-modal-longclick");aa.attr("data-buttons","#ProcessPageEdit > .Inputfields > .InputfieldSubmit .ui-button")}else{if(ab.cn=="View"){aa.addClass("pw-modal pw-modal-large pw-modal-longclick")}}}if(typeof ab.extras!="undefined"){for(var Z in ab.extras){R[Z]=ab.extras[Z]}W=aa}var ac=a("<li></li>").addClass("PageListAction"+Y).append(aa);if(Y=="Extras"){S=ac}else{V.append(ac)}});if(W){W.data("extras",R)}if(S){V.append(S);S.addClass("ui-priority-secondary")}T.append(V);return T}function k(P,O){if(typeof O=="undefined"){var O=false}if(O){var Q=P.attr("data-numTotal")}else{var Q=P.attr("data-numChild")}return Q&&Q.length>0?parseInt(Q):0}function L(O){return k(O,true)}function E(P,U,T,S){if(typeof T=="undefined"){var T=U}if(typeof S=="undefined"){var S=false}var O=S?"":P.children(".PageListNumChildren");var V=U===false?T:U;if(S||!O.length){O=a("<span></span>").addClass("PageListNumChildren detail");S=true}if(V<1){P.removeClass("PageListHasChildren").addClass("PageListNoChildren");if(T!==false){T=0}}else{P.removeClass("PageListNoChildren").addClass("PageListHasChildren")}if(T===false){T=L(P)}else{P.attr("data-numTotal",T)}if(U===false){U=k(P)}else{if(U<0){U=0}P.attr("data-numChild",U)}var R="";switch(d.qtyType){case"total":R=T;break;case"total/children":var Q="<span class='ui-priority-secondary'>/</span>";R=T>0&&T!=U?T+Q+U:T;break;case"children/total":var Q="<span class='ui-priority-secondary'>/</span>";R=T>0&&T!=U?U+Q+T:T;break;case"id":R=P.data("pageId");break;default:R=U}if(!R){R=""}O.html(R);if(S){P.append(O)}}function h(O,P){E(O,false,P)}function r(O,R){var P=L(O);P+=R;if(P<0){P=0}h(O,P);var Q=O.closest(".PageList").prev(".PageListItem");if(Q.length){r(Q,R)}}function s(V){var P=a(this);var R=P.data("extras");if(typeof R=="undefined"){return false}var Y=P.closest(".PageListItem");var Z=P.closest(".PageListActions");var T=null;var W=P.children("i.fa");var X=Z.find("li.PageListActionExtra");W.toggleClass("fa-flip-horizontal");if(X.length){X.fadeOut(100,function(){X.remove()});return false}for(var Q in R){var O=R[Q];var U=a("<a />").addClass("PageListActionExtra PageListAction"+O.cn).attr("href",O.url).html(O.name);if(typeof O.ajax!="undefined"&&O.ajax==true){U.click(function(){Y.find(".PageListActions").hide();var ag=a(d.spinnerMarkup);var ad=a(this).attr("href");var ac=ad.match(/[\?&]action=([-_a-zA-Z0-9]+)/)[1];var ab=parseInt(ad.match(/[\?&]id=([0-9]+)/)[1]);var af=a("#PageListContainer").attr("data-token-name");var ae=a("#PageListContainer").attr("data-token-value");var aa={action:ac,id:ab};aa[af]=ae;Y.append(ag);a.post(ad+"&render=json",aa,function(ah){if(ah.success){Y.fadeOut("fast",function(){var am=false;var an=ah.remove;var al=ah.refreshChildren;var ak=false;if(typeof ah.child!="undefined"){ak=l(ah.child)}else{if(typeof ah.newChild!="undefined"){ak=l(ah.newChild);am=true}}if(ak){var ai=a("<span />").addClass("notes").html(ah.message);ai.prepend("&nbsp;<i class='fa fa-check-square ui-priority-secondary'></i>&nbsp;");ak.append(ai);x(ak)}if(am){ag.fadeOut("normal",function(){ag.remove()});ak.hide();Y.after(ak);ak.slideDown();v(ak.closest(".PageList"))}else{if(ak){if(Y.hasClass("PageListItemOpen")){ak.addClass("PageListItemOpen")}Y.replaceWith(ak)}}Y.fadeIn("fast",function(){setTimeout(function(){ai.fadeOut("normal",function(){var aq=ak.closest(".PageList").prev(".PageListItem");var ap=k(aq);var ao=L(aq);if(an){ap--;r(aq,-1)}else{if(am){ap++;r(aq,1)}}E(aq,ap,false);v(aq);if(an){ak.next(".PageList").fadeOut("fast");ak.fadeOut("fast",function(){ak.remove()})}else{ai.remove()}})},1000)});if(al){var aj=a(".PageListID"+al);if(aj.length){v(aj,true)}}})}else{ag.remove();ProcessWire.alert(ah.message)}});return false})}else{}var S=a("<li />").addClass("PageListActionExtra PageListAction"+O.cn).append(U);U.hide();if(O.cn=="Trash"){Y.addClass("trashable");T=S}else{Z.append(S)}}if(T){Z.append(T)}Z.find(".PageListActionExtra a").fadeIn(50,function(){a(this).css("display","inline-block")});return false}function y(R){var V=a(this);var U=V.parent(".PageListItem");var T=U.data("pageId");if(f&&!U.hasClass("PageListTriggerOpen")){return false}if(K.is(".PageListSorting")||K.is(".PageListSortSaving")){return false}if(U.hasClass("PageListItemOpen")){var O=true;if(U.hasClass("PageListID1")&&!U.hasClass("PageListForceReload")&&d.mode!="select"){var P=a(this).closest(".PageListRoot").find(".PageListItemOpen:not(.PageListID1)");if(P.length){K.find(".PageListItemOpen:not(.PageListID1)").each(function(){a(this).children("a.PageListPage").click()});O=false}}if(O){U.removeClass("PageListItemOpen").next(".PageList").slideUp(d.speed,function(){a(this).remove()})}}else{U.addClass("PageListItemOpen");var Q=k(U);if(Q>0||U.hasClass("PageListForceReload")){f=true;var S=J(T);p(T,U,S,false)}}if(d.mode!="select"){setTimeout(function(){g()},250)}return false}function J(S){var R=0;for(n=0;n<d.openPageIDs.length;n++){var P=d.openPageIDs[n];if(P.indexOf("-")==-1){continue}var Q=d.openPageIDs[n].split("-");var O=parseInt(Q[0]);if(O==S){R=parseInt(Q[1]);break}}return R}function g(){b=[];a(".PageListItemOpen").each(function(){var P=a(this).data("pageId");var O=a(this).data("start");if(typeof O=="undefined"||O===null){O=0}else{var O=parseInt(O)}if(jQuery.inArray(P,b)==-1){b.push(P+"-"+O)}});a.cookie("pagelist_open",b)}function M(U,P){var S=a(".PageListID"+U).parent(".PageList");var V=S.prev(".PageListItem");if(!V.length){return}var W=V.attr("class").match(/PageListID(\d+)/)[1];var O=0;var T=S.children("ul."+d.paginationClass);var X=T.data("paginationInfo");var R=null;if(X){var Q=T.find(".pw-link-active");if(Q.length){O=parseInt(Q.attr("href"))*X.limit}if(O===NaN){O=0}}if(W==1){R=S.children();S=V}v(S);p(W,S,O,false,true,true,function(){if(R&&R.length){R.remove()}})}function H(R){var T=a(this);var P=T.parent("li").parent("ul.PageListActions");var O=P.parent(".PageList");var S=T.data("pageId");var Q=parseInt(T.attr("href"));p(S,O,Q,false);P.remove();return false}function j(){if(f){return false}var U=a(this);if(a(".PageListItem:visible").length==1){U.css("text-decoration","line-through").addClass("ui-state-disabled");return false}var T=U.parent("li").parent("ul.PageListActions").parent(".PageListItem");if(T.hasClass("PageListItemOpen")){T.children(".PageListPage").click()}K.find(".PageListItemOpen").each(function(){var W=k(a(this));if(parseInt(W)>1&&a(this).next().find(".PageList:visible").length==0){return}var V=a("<div></div>").addClass("PageListPlaceholder").addClass("PageList");V.append(a("<div></div>").addClass("PageListItem PageListPlaceholderItem").html("&nbsp;"));a(this).after(V)});var S={stop:t,helper:"PageListItemHelper",items:".PageListItem:not(.PageListItemOpen)",placeholder:"PageListSortPlaceholder",start:function(W,V){a(".PageListSortPlaceholder").css("width",V.item.children(".PageListPage").outerWidth()+"px")}};var P=K.children(".PageList").children(".PageList");var O=a("<a href='#'>"+d.selectCancelLabel+"</a>").click(function(){return u(T)});var R=T.children("ul.PageListActions");var Q=a("<span class='PageListMoveNote detail'><i class='fa fa-fw fa-sort'></i> "+d.moveInstructionLabel+"<i class='fa fa-fw fa-angle-left'></i></span>");Q.append(O);R.before(Q);T.addClass("PageListSortItem");T.parent(".PageList").attr("id","PageListMoveFrom");K.addClass("PageListSorting");P.addClass("PageListSortingList").sortable(S);return false}function u(P){var O=K.find(".PageListSortingList");O.sortable("destroy").removeClass("PageListSortingList");P.removeClass("PageListSortItem").parent(".PageList").removeAttr("id");P.find(".PageListMoveNote").remove();K.find(".PageListPlaceholder").remove();K.removeClass("PageListSorting");return false}function B(R){var O=K.find(".PageListID"+d.trashPageID);if(!O.hasClass("PageListItemOpen")){K.removeClass("PageListSorting");O.children("a").click();K.addClass("PageListSorting")}var P=O.next(".PageList");if(P.length==0){P=a("<div class='PageList'></div>");O.after(P)}P.prepend(R);var Q={item:R};t(null,Q)}function t(U,Z){var W=Z.item;var R=W.children(".PageListPage");var P=parseInt(W.data("pageId"));var T=W.parent(".PageList");var X=a("#PageListMoveFrom");var Y=T.prev().is(".PageListItem")?T.prev():T.prev().prev();var V=parseInt(Y.data("pageId"));var Q=W.prev(".PageListItem");if(Q.is(".PageListItemOpen")){return false}if(T.is(".PageListPlaceholder")){var aa=T.next();if(aa.is(".PageList:visible")){aa.prepend(W);T=aa}else{T.removeClass("PageListPlaceholder").children(".PageListPlaceholderItem").remove()}}K.addClass("PageListSortSaving");u(W);W.append(z.fadeIn("fast"));var S="";T.children(".PageListItem").each(function(){S+=a(this).data("pageId")+","});var O={id:P,parent_id:V,sort:S};O[a("#PageListContainer").attr("data-token-name")]=a("#PageListContainer").attr("data-token-value");var ab="unknown";a.post(d.ajaxMoveURL,O,function(ad){z.fadeOut("fast");R.fadeOut("fast",function(){a(this).fadeIn("fast");W.removeClass("PageListSortItem");K.removeClass("PageListSorting")});if(ad&&ad.error){ProcessWire.alert(ad.message)}if(!T.is("#PageListMoveFrom")){var ac=X.prev(".PageListItem");var ag=k(ac);var af=L(ac);if(ag>0){ag--;r(ac,-1)}else{X.remove()}E(ac,ag,false);v(ac);var ae=T.prev(".PageListItem");ag=k(ae)+1;r(ae,1);E(ae,ag,false);v(ae)}X.attr("id","");K.removeClass("PageListSortSaving")},"json");W.trigger("pageMoved");return true}function G(){var U=a(this);var T=U.parent("li").parent("ul.PageListActions").parent(".PageListItem");var S=T.data("pageId");var Q=T.children(".PageListPage");var R=Q.text();var P=Q.attr("title");var O=K.children(".PageListSelectHeader");if(U.text()==d.selectUnselectLabel){S=0;R=""}if(S!=A.val()){A.val(S).change()}if(d.selectShowPageHeader){O.children(".PageListSelectName").text(R)}A.trigger("pageSelected",{id:S,url:P,title:R,a:Q});O.find(".PageListSelectActionToggle").click();if(d.selectSelectHref=="#"){return false}return true}D()})}})(jQuery);