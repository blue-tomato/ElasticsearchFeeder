(function(a){if(!a.layout){return}if(!a.ui){a.ui={}}a.ui.cookie={acceptsCookies:!!navigator.cookieEnabled,read:function(b){var h=document.cookie,e=h?h.split(";"):[],g,f,d;for(d=0;g=e[d];d++){f=a.trim(g).split("=");if(f[0]==b){return decodeURIComponent(f[1])}}return null},write:function(b,d,h){var f="",e="",g=false,c=h||{},i=c.expires||null,j=a.type(i);if(j==="date"){e=i}else{if(j==="string"&&i>0){i=parseInt(i,10);j="number"}}if(j==="number"){e=new Date();if(i>0){e.setDate(e.getDate()+i)}else{e.setFullYear(1970);g=true}}if(e){f+=";expires="+e.toUTCString()}if(c.path){f+=";path="+c.path}if(c.domain){f+=";domain="+c.domain}if(c.secure){f+=";secure"}document.cookie=b+"="+(g?"":encodeURIComponent(d))+f},clear:function(b){a.ui.cookie.write(b,"",{expires:-1})}};if(!a.cookie){a.cookie=function(c,b,e){var d=a.ui.cookie;if(b===null){d.clear(c)}else{if(b===undefined){return d.read(c)}else{d.write(c,b,e)}}}}a.layout.plugins.stateManagement=true;a.layout.defaults.stateManagement={enabled:false,autoSave:true,autoLoad:true,animateLoad:true,includeChildren:true,stateKeys:"north.size,south.size,east.size,west.size,north.isClosed,south.isClosed,east.isClosed,west.isClosed,north.isHidden,south.isHidden,east.isHidden,west.isHidden",cookie:{name:"",domain:"",path:"",expires:"",secure:false}};a.layout.optionsMap.layout.push("stateManagement");a.layout.config.optionRootKeys.push("stateManagement");a.layout.state={saveCookie:function(f,d,c){var g=f.options,h=g.stateManagement,b=a.extend(true,{},h.cookie,c||null),e=f.state.stateData=f.readState(d||h.stateKeys);a.ui.cookie.write(b.name||g.name||"Layout",a.layout.state.encodeJSON(e),b);return a.extend(true,{},e)},deleteCookie:function(b){var c=b.options;a.ui.cookie.clear(c.stateManagement.cookie.name||c.name||"Layout")},readCookie:function(b){var d=b.options;var e=a.ui.cookie.read(d.stateManagement.cookie.name||d.name||"Layout");return e?a.layout.state.decodeJSON(e):{}},loadCookie:function(b){var d=a.layout.state.readCookie(b);if(d&&!a.isEmptyObject(d)){b.state.stateData=a.extend(true,{},d);b.loadState(d)}return d},loadState:function(k,i,b){if(!a.isPlainObject(i)||a.isEmptyObject(i)){return}i=k.state.stateData=a.layout.transformData(i);var f=k.options.stateManagement;b=a.extend({animateLoad:false,includeChildren:f.includeChildren},b);if(!k.state.initialized){var e=a.extend(true,{},i);a.each(a.layout.config.allPanes,function(c,h){if(e[h]){delete e[h].children}});a.extend(true,k.options,e)}else{var g=!b.animateLoad,e,n,l,d,j;a.each(a.layout.config.borderPanes,function(c,h){e=i[h];if(!a.isPlainObject(e)){return}s=e.size;n=e.initClosed;l=e.initHidden;ar=e.autoResize;d=k.state[h];j=d.isVisible;if(ar){d.autoResize=ar}if(!j){k._sizePane(h,s,false,false,false)}if(l===true){k.hide(h,g)}else{if(n===true){k.close(h,false,g)}else{if(n===false){k.open(h,false,g)}else{if(l===false){k.show(h,false,g)}}}}if(j){k._sizePane(h,s,false,false,g)}});if(b.includeChildren){var m,p;a.each(k.children,function(h,c){m=i[h]?i[h].children:0;if(m&&c){a.each(c,function(q,o){p=m[q];if(o&&p){o.loadState(p)}})}})}}},readState:function(d,k){if(a.type(k)==="string"){k={keys:k}}if(!k){k={}}var v=d.options.stateManagement,o=k.includeChildren,b=o!==undefined?o:v.includeChildren,l=k.stateKeys||v.stateKeys,w={isClosed:"initClosed",isHidden:"initHidden"},e=d.state,j=a.layout.config.allPanes,x={},q,m,y,z,r,t,f,h,g,c;if(a.isArray(l)){l=l.join(",")}l=l.replace(/__/g,".").split(",");for(var u=0,p=l.length;u<p;u++){q=l[u].split(".");m=q[0];y=q[1];if(a.inArray(m,j)<0){continue}z=e[m][y];if(z==undefined){continue}if(y=="isClosed"&&e[m]["isSliding"]){z=true}(x[m]||(x[m]={}))[w[y]?w[y]:y]=z}if(b){a.each(j,function(i,n){t=d.children[n];r=e.stateData[n];if(a.isPlainObject(t)&&!a.isEmptyObject(t)){c=x[n]||(x[n]={});if(!c.children){c.children={}}a.each(t,function(A,B){if(B.state.initialized){c.children[A]=a.layout.state.readState(B)}else{if(r&&r.children&&r.children[A]){c.children[A]=a.extend(true,{},r.children[A])}}})}})}return x},encodeJSON:function(c){var b=window.JSON||{};return(b.stringify||d)(c);function d(m){var n=[],l=0,g,f,j,e=a.isArray(m);for(g in m){f=m[g];j=typeof f;if(j=="string"){f='"'+f+'"'}else{if(j=="object"){f=parse(f)}}n[l++]=(!e?'"'+g+'":':"")+f}return(e?"[":"{")+n.join(",")+(e?"]":"}")}},decodeJSON:function(c){try{return a.parseJSON?a.parseJSON(c):window["eval"]("("+c+")")||{}}catch(b){return{}}},_create:function(c){var b=a.layout.state,h=c.options,i=h.stateManagement;a.extend(c,{readCookie:function(){return b.readCookie(c)},deleteCookie:function(){b.deleteCookie(c)},saveCookie:function(e,d){return b.saveCookie(c,e,d)},loadCookie:function(){return b.loadCookie(c)},loadState:function(d,e){b.loadState(c,d,e)},readState:function(d){return b.readState(c,d)},encodeJSON:b.encodeJSON,decodeJSON:b.decodeJSON});c.state.stateData={};if(!i.autoLoad){return}if(a.isPlainObject(i.autoLoad)){if(!a.isEmptyObject(i.autoLoad)){c.loadState(i.autoLoad)}}else{if(i.enabled){if(a.isFunction(i.autoLoad)){var g={};try{g=i.autoLoad(c,c.state,c.options,c.options.name||"")}catch(f){}if(g&&a.isPlainObject(g)&&!a.isEmptyObject(g)){c.loadState(g)}}else{c.loadCookie()}}}},_unload:function(b){var d=b.options.stateManagement;if(d.enabled&&d.autoSave){if(a.isFunction(d.autoSave)){try{d.autoSave(b,b.state,b.options,b.options.name||"")}catch(c){}}else{b.saveCookie()}}}};a.layout.onCreate.push(a.layout.state._create);a.layout.onUnload.push(a.layout.state._unload)})(jQuery);